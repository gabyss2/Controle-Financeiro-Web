
import React, { useState, useEffect } from "react"; import { TextInput, Text, Alert } from "react-native"; import { supabase } from "../lib/supabase"; import { Button, Screen } from "../components/UI"; import { useRouter } from "expo-router";
export default function Login() { const [email, setEmail] = useState(""); const [pass, setPass] = useState(""); const router = useRouter(); useEffect(() => { supabase.auth.getSession().then(({ data }) => { if (data?.session) router.replace('/(tabs)'); }); }, []); async function signIn() { const { error } = await supabase.auth.signInWithPassword({ email, password: pass }); if (error) Alert.alert("Erro", error.message); else router.replace("/(tabs)"); } async function signUp() { const { error } = await supabase.auth.signUp({ email, password: pass }); if (error) Alert.alert("Erro", error.message); else Alert.alert("Pronto!", "Verifique seu e-mail e depois faça login."); } return (<Screen title="Entrar"><TextInput placeholder="Seu e-mail" autoCapitalize="none" keyboardType="email-address" value={email} onChangeText={setEmail} style={{ borderWidth: 1, padding: 10, borderRadius: 8 }} /><TextInput placeholder="Senha" secureTextEntry value={pass} onChangeText={setPass} style={{ borderWidth: 1, padding: 10, borderRadius: 8 }} /><Button label="Entrar" onPress={signIn} /><Button label="Criar conta" onPress={signUp} variant="ghost" /><Text style={{ opacity: 0.6 }}>Dica: crie a conta e depois faça login.</Text></Screen>); }
